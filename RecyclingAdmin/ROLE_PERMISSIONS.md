# 角色权限控制说明

## 概述
系统已实现基于角色的权限控制，不同角色的用户登录后将看到不同的菜单和功能。

## 角色定义

### 管理员 (Admin)
- **登录账号**: admin / Admin123!
- **权限范围**: 除客服工作台外的所有功能
- **可访问菜单**:
  - 仪表板
  - 内容管理
    - 首页轮播图管理
    - 公司信息编辑
    - 产品分类管理
    - 案例内容管理
  - 招聘管理
    - 岗位发布/下架
    - 简历管理
    - 应聘者状态跟踪
  - 咨询管理
    - 客服账号管理
    - 对话监控
    - 数据统计
  - 表单管理
    - 联系表单查看
    - 导出功能
  - 用户管理

### 客服员工 (Staff)
- **登录账号**: staff / Staff123!
- **权限范围**: 仅客服工作台
- **可访问菜单**:
  - 客服工作台

## 权限控制实现

### 路由级别控制
- 每个路由都配置了 `roles` 元数据，指定允许访问的角色
- 路由守卫会检查用户角色，无权限时自动重定向

### 菜单显示控制
- 侧边栏菜单根据用户角色动态显示
- 管理员看不到客服工作台菜单
- 员工只能看到客服工作台菜单

### 登录后重定向
- 管理员登录后重定向到仪表板 (`/`)
- 员工登录后重定向到客服工作台 (`/consultation/workbench`)

## 测试方法

1. 使用管理员账号登录 (admin / Admin123!)
   - 应该看到完整的管理菜单
   - 无法访问客服工作台
   - 顶部显示"管理员"标签

2. 使用员工账号登录 (staff / Staff123!)
   - 只能看到客服工作台菜单
   - 直接进入工作台页面
   - 顶部显示"客服员工"标签

## 技术实现细节

### 路由配置
```typescript
// 管理员专用路由
meta: { title: '仪表板', roles: ['admin'] }

// 员工专用路由
meta: { title: '客服工作台', roles: ['staff'] }
```

### 权限检查
```typescript
// 路由守卫中的权限检查
if (to.meta.roles && Array.isArray(to.meta.roles)) {
  const userRole = authStore.user?.userType?.toLowerCase()
  if (!userRole || !to.meta.roles.includes(userRole)) {
    // 重定向到有权限的页面
  }
}
```

### 菜单控制
```vue
<!-- 管理员菜单 -->
<template v-if="isAdmin">
  <!-- 管理员专用菜单项 -->
</template>

<!-- 员工菜单 -->
<template v-if="isStaff">
  <!-- 员工专用菜单项 -->
</template>
``` 